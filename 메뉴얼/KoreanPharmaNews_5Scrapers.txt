# 국내외 제약 뉴스 스크래퍼 통합 매뉴얼 (5개)
작성일: 2026-02-03
버전: 1.2 (Daily Pharm v2.0 업데이트: 3개 카테고리 지원)

═══════════════════════════════════════════════════════════════════════════════
1. 개요
═══════════════════════════════════════════════════════════════════════════════

이 매뉴얼은 5개의 주요 국내외 제약 뉴스 소스 스크래퍼를 다룹니다:
- GMP Journal (국제 GMP 규제 뉴스)
- KPBMA (한국제약바이오협회 뉴스레터)
- KPA News (약사공론)
- Daily Pharm (데일리팜)
- Yakup (약업신문)

모든 스크래퍼는 파이프라인에 통합되어 있으며, AI 요약 및 이메일 발송 시스템과 연동됩니다.

═══════════════════════════════════════════════════════════════════════════════
2. 스크래퍼 개별 정보
═══════════════════════════════════════════════════════════════════════════════

2.1 GMP Journal 스크래퍼
────────────────────────────────────────────────────────────────────────────
  파일: scrapers/gmpjournal_scraper.py
  소스명: GMP Journal
  URL: https://www.gmp-journal.com

  특징:
  - 영문 GMP/규제 뉴스
  - 검색 기능: https://www.gmp-journal.com/search-result.html
  - 메인 페이지에서 최신 뉴스 수집

  기본 설정:
  - days_back: 7일 (영문 사이트라 업데이트 빈도 낮음)
  - 언어: English
  - 검색어: query 파라미터로 지정 가능

  파이프라인 설정:
    "gmp_journal": {
        "class": GMPJournalScraper,
        "enabled": True,
        "description": "GMP Journal",
        "args": {}
    }

2.2 KPBMA 스크래퍼 (한국제약바이오협회)
────────────────────────────────────────────────────────────────────────────
  파일: scrapers/kpbma_scraper.py
  소스명: 한국제약바이오협회 뉴스레터
  URL: https://www.kpbma.or.kr/

  특징:
  - ⚠️ Stibee API 사용 (웹 스크래핑 아님!)
  - API URL: https://stibee.com/api/v1.0/emails/share/2sAriUDbUicnvEpfQpkEk8F9XGprX58
  - 뉴스레터 형식으로 제공

  기본 설정:
  - days_back: 기본값 사용 (1일/3일 Monday)
  - 언어: 한국어
  - API를 통한 뉴스레터 수집

  파이프라인 설정:
    "kpbma": {
        "class": KPBMAScraper,
        "enabled": True,
        "description": "한국제약바이오협회 뉴스레터",
        "args": {}
    }

2.3 KPA News 스크래퍼 (약사공론)
────────────────────────────────────────────────────────────────────────────
  파일: scrapers/kpanews_scraper.py
  소스명: 약사공론 (KPA News)
  URL: https://www.kpanews.co.kr

  특징:
  - 기사 목록: https://www.kpanews.co.kr/article/list.asp
  - 검색: https://www.kpanews.co.kr/article/search4.asp?top_keyword=검색어
  - 약사/약국 중심 뉴스

  기본 설정:
  - days_back: 기본값 사용 (1일/3일 Monday)
  - 언어: 한국어
  - 검색 기능 지원

  파이프라인 설정:
    "kpa_news": {
        "class": KPANewsScraper,
        "enabled": True,
        "description": "약사공론 (KPA News)",
        "args": {}
    }

2.4 Daily Pharm 스크래퍼 (데일리팜) - v2.0 업데이트
────────────────────────────────────────────────────────────────────────────
  파일: scrapers/dailypharm_scraper.py
  소스명: 데일리팜 (Daily Pharm)
  URL: https://www.dailypharm.com

  수집 소스 (3개):
  1. https://www.dailypharm.com/user/news (메인 뉴스)
  2. https://www.dailypharm.com/user/news?group=정책·법률 (정책·법률 카테고리)
  3. https://www.dailypharm.com/user/news?group=제약·바이오 (제약·바이오 카테고리)

  특징:
  - 3개 카테고리 병렬 수집
  - 검색: https://www.dailypharm.com/user/news/search?...
  - 제약/바이오 산업 뉴스
  - 중복 제거 (seen_links)
  - full_text 10,000자 지원 (AI 요약용)
  - 카테고리별 제목 접두사: [데일리팜 - {category}]

  기본 설정:
  - days_back: 자동 계산 (월요일: 3일, 평일: 1일)
  - 언어: 한국어
  - 검색 기능 지원

  파이프라인 설정:
    "dailypharm": {
        "class": DailyPharmScraper,
        "enabled": True,
        "description": "데일리팜 (Daily Pharm) - 3개 카테고리",
        "args": {}
    }

2.5 Yakup 스크래퍼 (약업신문) - v2.0 업데이트
────────────────────────────────────────────────────────────────────────────
  파일: scrapers/yakup_scraper.py
  소스명: 약업신문 (Yakup News)
  URL: https://www.yakup.com

  수집 소스 (3개):
  1. https://www.yakup.com/news/index.html (메인 뉴스)
  2. https://www.yakup.com/news/index.html?cat=11 (카테고리 11)
  3. https://www.yakup.com/news/index.html?cat=12&cat2=121 (카테고리 12-121)

  특징:
  - 3개 카테고리 병렬 수집
  - 검색: https://www.yakup.com/search/index.html?csearch_word=검색어&csearch_type=news
  - 약업계 종합 뉴스
  - 중복 제거 (seen_links)
  - full_text 10,000자 지원 (AI 요약용)
  - 카테고리별 제목 접두사: [약업신문 - {category}]

  기본 설정:
  - days_back: 자동 계산 (월요일: 3일, 평일: 1일)
  - 언어: 한국어
  - 검색 기능 지원

  파이프라인 설정:
    "yakup": {
        "class": YakupScraper,
        "enabled": True,
        "description": "약업신문 (Yakup News)",
        "args": {}
    }

═══════════════════════════════════════════════════════════════════════════════
3. 공통 기능
═══════════════════════════════════════════════════════════════════════════════

3.1 Days Back 로직 (날짜 필터링)
────────────────────────────────────────────────────────────────────────────
  모든 스크래퍼 공통:
  - 월요일: 3일 전 (금~일 주말 포함)
  - 평일: 1일 전

  예외:
  - GMP Journal: 기본 7일 (영문 사이트라 업데이트 빈도 낮음)

3.2 Base Scraper 상속
────────────────────────────────────────────────────────────────────────────
  모든 스크래퍼는 BaseScraper 클래스 상속:

  필수 구현 메서드:
  - source_name: 뉴스 소스 이름 반환
  - base_url: 기본 URL 반환
  - fetch_news(query, days_back): 뉴스 수집 메인 메서드

  공통 제공 메서드:
  - get_headers(): HTTP 요청 헤더
  - fetch_article_content(url, selectors): 기사 본문 추출

3.3 키워드 분류
────────────────────────────────────────────────────────────────────────────
  모든 스크래퍼는 src/keywords.py의 classify_article() 사용:

  분류 카테고리:
  - GMP (Good Manufacturing Practice)
  - 규제 (Regulatory)
  - 품질 (Quality)
  - 제조 (Manufacturing)
  - 신약 (New Drug)
  - 바이오 (Bio)
  - 등등...

3.4 AI 요약 통합
────────────────────────────────────────────────────────────────────────────
  모든 스크래퍼 수집 데이터는:
  1. multi_source_scraper.py로 통합
  2. ai_summarizer_gemini.py로 AI 요약 생성
  3. email_sender.py로 이메일 발송

  파이프라인 자동 실행: 매일 오전 7시 (run_pipeline.py)

═══════════════════════════════════════════════════════════════════════════════
4. 스크래핑 방식 비교
═══════════════════════════════════════════════════════════════════════════════

4.1 HTML 스크래핑 (4개)
────────────────────────────────────────────────────────────────────────────
  GMP Journal, KPA News, Daily Pharm, Yakup

  공통 프로세스:
  1. 뉴스 목록 페이지 접근
  2. BeautifulSoup로 HTML 파싱
  3. 기사 링크 추출
  4. 개별 기사 페이지 방문
  5. 제목, 날짜, 본문 추출
  6. 키워드 분류 및 필터링

4.2 API 기반 (1개)
────────────────────────────────────────────────────────────────────────────
  KPBMA

  특징:
  - Stibee 뉴스레터 API 사용
  - JSON 형식으로 데이터 수신
  - HTML 파싱 불필요
  - 안정적이고 빠름

═══════════════════════════════════════════════════════════════════════════════
5. 사용 방법
═══════════════════════════════════════════════════════════════════════════════

5.1 개별 스크래퍼 테스트
────────────────────────────────────────────────────────────────────────────
  GMP Journal:
    python scrapers/gmpjournal_scraper.py --query "validation" --days 7

  KPBMA:
    python scrapers/kpbma_scraper.py --days 7

  KPA News:
    python scrapers/kpanews_scraper.py --query "GMP" --days 3

  Daily Pharm:
    python scrapers/dailypharm_scraper.py --query "바이오" --days 3

  Yakup:
    python scrapers/yakup_scraper.py --query "제약" --days 3

5.2 통합 파이프라인 실행
────────────────────────────────────────────────────────────────────────────
  모든 스크래퍼 실행:
    python src/multi_source_scraper.py

  특정 스크래퍼만 실행:
    python src/multi_source_scraper.py --sources gmp_journal kpa_news dailypharm

  days_back 지정:
    python src/multi_source_scraper.py --days 7

5.3 소스 목록 확인
────────────────────────────────────────────────────────────────────────────
  python src/multi_source_scraper.py --list

  출력 예시:
    [✓] gmp_journal: GMP Journal
    [✓] kpbma: 한국제약바이오협회 뉴스레터
    [✓] kpa_news: 약사공론 (KPA News)
    [✓] dailypharm: 데일리팜 (Daily Pharm)
    [✓] yakup: 약업신문 (Yakup News)

═══════════════════════════════════════════════════════════════════════════════
6. 데이터 출력 형식
═══════════════════════════════════════════════════════════════════════════════

6.1 NewsArticle 객체 (공통)
────────────────────────────────────────────────────────────────────────────
  모든 스크래퍼는 NewsArticle 객체 반환:

  {
    "title": "[소스명] 기사 제목",
    "link": "기사 URL",
    "published": "2026-02-02T10:00:00",
    "source": "소스명",
    "summary": "요약 (최대 300자)",
    "full_text": "전체 내용 (최대 10000자)",
    "images": [],
    "scrape_status": "success",
    "classifications": ["GMP", "규제"],
    "matched_keywords": ["validation", "GMP", "규제"]
  }

6.2 소스별 제목 형식
────────────────────────────────────────────────────────────────────────────
  - GMP Journal: "[GMP Journal] ..."
  - KPBMA: "[한국제약바이오협회] ..."
  - KPA News: "[약사공론] ..."
  - Daily Pharm:
    * "[데일리팜] ..." (메인)
    * "[데일리팜 - 정책·법률] ..." (정책·법률 카테고리)
    * "[데일리팜 - 제약·바이오] ..." (제약·바이오 카테고리)
  - Yakup:
    * "[약업신문] ..." (메인)
    * "[약업신문 - Cat-11] ..." (카테고리 11)
    * "[약업신문 - Cat-12-121] ..." (카테고리 12-121)

═══════════════════════════════════════════════════════════════════════════════
7. 성능 및 안정성
═══════════════════════════════════════════════════════════════════════════════

7.1 예상 수집량 (1일 기준)
────────────────────────────────────────────────────────────────────────────
  GMP Journal: 1-3개 (영문, 업데이트 빈도 낮음)
  KPBMA: 5-10개 (뉴스레터)
  KPA News: 10-20개 (약사 뉴스)
  Daily Pharm: 15-30개 (제약 산업 뉴스)
  Yakup: 10-20개 (약업 뉴스)

  총합: 40-80개 기사/일

7.2 실행 시간
────────────────────────────────────────────────────────────────────────────
  GMP Journal: 약 10초
  KPBMA: 약 5초 (API)
  KPA News: 약 15초
  Daily Pharm: 약 20초
  Yakup: 약 15초

  총합: 약 1분 5초

7.3 에러 처리
────────────────────────────────────────────────────────────────────────────
  모든 스크래퍼 공통:
  - 네트워크 에러: 재시도 없이 건너뛰기
  - 403/404 에러: 로그 출력 후 계속 진행
  - 파싱 에러: 해당 기사만 건너뛰기
  - 프로그램 중단 없이 안정적으로 실행

═══════════════════════════════════════════════════════════════════════════════
8. 문제 해결 가이드
═══════════════════════════════════════════════════════════════════════════════

8.1 수집 결과가 0개일 때
────────────────────────────────────────────────────────────────────────────
  1. 날짜 필터 확인:
     - days_back 값을 늘려보기 (예: 7일, 14일)
     - 월요일 아침 실행 시 3일로 자동 설정 확인

  2. 사이트 접근 확인:
     - 브라우저에서 해당 URL 직접 접속
     - 403/404 에러 로그 확인

  3. HTML 구조 변경:
     - 사이트가 리뉴얼되었을 수 있음
     - 개발자 도구로 HTML 구조 확인
     - 선택자 업데이트 필요

8.2 특정 스크래퍼만 실패할 때
────────────────────────────────────────────────────────────────────────────
  GMP Journal:
  - 영문 사이트라 Cloudflare 등 봇 차단 가능
  - User-Agent 헤더 업데이트
  - days_back을 14일 이상으로 늘리기

  KPBMA:
  - Stibee API URL 변경 가능성
  - API URL 확인 (브라우저 개발자 도구 Network 탭)

  KPA News, Daily Pharm, Yakup:
  - 사이트 리뉴얼로 HTML 구조 변경
  - CSS 선택자 업데이트 필요
  - 인코딩 문제 (EUC-KR vs UTF-8) 확인

8.3 인코딩 에러
────────────────────────────────────────────────────────────────────────────
  문제: UnicodeDecodeError 또는 한글 깨짐

  해결:
  1. 사이트 인코딩 확인:
     - Content-Type 헤더 확인
     - 대부분 한국 사이트: EUC-KR 또는 UTF-8

  2. base_scraper.py에서 인코딩 자동 감지:
     - response.encoding 설정
     - apparent_encoding 사용

  3. 수동 인코딩 지정:
     response.encoding = 'euc-kr'  # 또는 'utf-8'

8.4 검색 기능이 작동하지 않을 때
────────────────────────────────────────────────────────────────────────────
  1. 검색 URL 형식 확인:
     - 브라우저에서 직접 검색 테스트
     - URL 파라미터 확인 (query, keyword, search 등)

  2. URL 인코딩 확인:
     - 한글 검색어는 URL 인코딩 필요
     - quote() 또는 urlencode() 사용

  3. POST vs GET:
     - 일부 사이트는 POST 방식 검색
     - requests.post() 사용 필요

═══════════════════════════════════════════════════════════════════════════════
9. 커스터마이징
═══════════════════════════════════════════════════════════════════════════════

9.1 특정 스크래퍼 비활성화
────────────────────────────────────────────────────────────────────────────
  src/multi_source_scraper.py에서:

  "gmp_journal": {
      "class": GMPJournalScraper,
      "enabled": False,  # True → False로 변경
      "description": "GMP Journal",
      "args": {}
  }

9.2 기본 days_back 변경
────────────────────────────────────────────────────────────────────────────
  개별 스크래퍼 파일에서 fetch_news() 메서드:

  def fetch_news(self, query: str = None, days_back: int = 7):
                                                        # ↑ 여기 수정
      ...

9.3 검색 키워드 추가
────────────────────────────────────────────────────────────────────────────
  src/keywords.py에서 KEYWORD_GROUPS 딕셔너리 수정:

  KEYWORD_GROUPS = {
      "GMP": ["GMP", "cGMP", "밸리데이션", "validation"],
      "신규카테고리": ["키워드1", "키워드2"],  # 새 카테고리 추가
      ...
  }

9.4 특정 키워드로만 필터링
────────────────────────────────────────────────────────────────────────────
  파이프라인 args에 query 추가:

  "dailypharm": {
      "class": DailyPharmScraper,
      "enabled": True,
      "description": "데일리팜 (Daily Pharm)",
      "args": {"query": "바이오시밀러"}  # 특정 키워드로 검색
  }

═══════════════════════════════════════════════════════════════════════════════
10. 비교: 한국 vs 영문 스크래퍼
═══════════════════════════════════════════════════════════════════════════════

10.1 한국 스크래퍼 (4개)
────────────────────────────────────────────────────────────────────────────
  KPBMA, KPA News, Daily Pharm, Yakup

  특징:
  - 높은 업데이트 빈도 (일 10-30개)
  - EUC-KR 인코딩 가능성
  - 한글 검색 키워드 필요
  - 국내 제약/바이오 규제 뉴스

  장점:
  - 한국 시장 특화 정보
  - 빠른 뉴스 업데이트
  - MFDS 규제 정보

  단점:
  - 사이트 리뉴얼 빈번
  - 인코딩 이슈
  - 광고/홍보성 기사 혼재

10.2 영문 스크래퍼 (1개)
────────────────────────────────────────────────────────────────────────────
  GMP Journal

  특징:
  - 낮은 업데이트 빈도 (주 1-5개)
  - UTF-8 인코딩
  - 영문 검색 키워드
  - 국제 GMP 규제 뉴스

  장점:
  - 글로벌 GMP 동향
  - FDA, EMA 규제 정보
  - 높은 정보 품질

  단점:
  - 업데이트 빈도 낮음
  - Cloudflare 등 봇 차단 가능
  - 한국 시장 정보 부족

═══════════════════════════════════════════════════════════════════════════════
11. 통합 워크플로우
═══════════════════════════════════════════════════════════════════════════════

11.1 일일 자동 실행 (오전 7시)
────────────────────────────────────────────────────────────────────────────
  1단계: 뉴스 수집 (multi_source_scraper.py)
     ├─ GMP Journal: 7일치 영문 뉴스
     ├─ KPBMA: 1일치 뉴스레터 (API)
     ├─ KPA News: 1일치 약사 뉴스
     ├─ Daily Pharm: 1일치 제약 뉴스
     ├─ Yakup: 1일치 약업 뉴스
     └─ 기타 13개 소스...
     → 총 150-300개 기사 수집

  2단계: 키워드 필터링 (keywords.py)
     - GMP, 규제, 품질, 제조 등 분류
     - 매칭 키워드 추출
     → 100-200개 기사로 필터링

  3단계: AI 요약 생성 (ai_summarizer_gemini.py)
     - Gemini AI로 각 기사 요약
     - 한국어 요약 생성
     - 핵심 포인트 3개 추출

  4단계: 이메일 발송 (email_sender.py)
     - HTML 이메일 생성
     - 소스별 그룹핑
     - 수신자에게 발송

11.2 데이터 저장
────────────────────────────────────────────────────────────────────────────
  원본 데이터:
    data/news/multi_source_news_YYYYMMDD.json

  AI 요약 데이터:
    data/news/multi_source_summarized_YYYYMMDD.json

  보관 기간: 14일 (자동 삭제)

═══════════════════════════════════════════════════════════════════════════════
12. 향후 개선 사항
═══════════════════════════════════════════════════════════════════════════════

12.1 우선순위 높음
────────────────────────────────────────────────────────────────────────────
  □ KPBMA API URL 모니터링
    → 변경 시 자동 감지 및 업데이트

  □ 한글 인코딩 자동 감지 개선
    → chardet 라이브러리 사용

  □ 사이트 리뉴얼 자동 감지
    → HTML 구조 변경 시 알림

12.2 우선순위 중간
────────────────────────────────────────────────────────────────────────────
  □ 검색 기능 강화
    → 여러 키워드 동시 검색
    → OR/AND 조건 지원

  □ 중복 기사 감지
    → 제목 유사도 비교
    → 동일 기사 필터링

  □ 카테고리별 통계
    → 소스별 수집 현황
    → 키워드별 트렌드 분석

12.3 우선순위 낮음
────────────────────────────────────────────────────────────────────────────
  □ 추가 한국 뉴스 소스
    → 청년의사, 메디게이트 등

  □ RSS 피드 추가
    → 가능한 소스는 RSS 우선 사용

  □ 웹 인터페이스
    → 수집 현황 대시보드

═══════════════════════════════════════════════════════════════════════════════
13. 관련 파일
═══════════════════════════════════════════════════════════════════════════════

13.1 스크래퍼 파일
────────────────────────────────────────────────────────────────────────────
  scrapers/gmpjournal_scraper.py        - GMP Journal
  scrapers/kpbma_scraper.py             - KPBMA
  scrapers/kpanews_scraper.py           - KPA News
  scrapers/dailypharm_scraper.py        - Daily Pharm
  scrapers/yakup_scraper.py             - Yakup
  scrapers/base_scraper.py              - 베이스 클래스

13.2 공통 파일
────────────────────────────────────────────────────────────────────────────
  src/keywords.py                       - 키워드 분류
  src/multi_source_scraper.py           - 통합 스크래퍼
  src/run_pipeline.py                   - 파이프라인 실행
  src/ai_summarizer_gemini.py           - AI 요약
  src/email_sender.py                   - 이메일 발송

13.3 Python 패키지
────────────────────────────────────────────────────────────────────────────
  requests                              - HTTP 요청
  beautifulsoup4                        - HTML 파싱
  lxml                                  - HTML 파서
  python-dateutil                       - 날짜 파싱

═══════════════════════════════════════════════════════════════════════════════
14. FAQ
═══════════════════════════════════════════════════════════════════════════════

Q1: 왜 KPBMA만 API를 사용하나요?
────────────────────────────────────────────────────────────────────────────
A: KPBMA는 Stibee 뉴스레터 서비스를 사용합니다. 웹페이지가 아닌 이메일
   뉴스레터 형식이므로, Stibee API를 통해 직접 데이터를 가져오는 것이
   더 안정적이고 빠릅니다.

Q2: GMP Journal은 왜 days_back이 7일인가요?
────────────────────────────────────────────────────────────────────────────
A: 영문 사이트라 업데이트 빈도가 낮습니다. 주 1-2회 정도만 새 기사가
   올라오므로, 7일로 설정하여 충분한 기사를 수집합니다.

Q3: 한글 사이트에서 인코딩 에러가 자주 발생해요.
────────────────────────────────────────────────────────────────────────────
A: 한국 뉴스 사이트는 EUC-KR과 UTF-8을 혼용합니다. base_scraper.py의
   fetch_article_content() 메서드에서 인코딩을 자동 감지하지만, 완벽하지
   않습니다. 필요시 개별 스크래퍼에서 response.encoding을 명시적으로 지정하세요.

Q4: 특정 키워드만 수집하고 싶어요.
────────────────────────────────────────────────────────────────────────────
A: multi_source_scraper.py의 SCRAPERS_CONFIG에서 args에 query를 추가하세요:
   "args": {"query": "바이오시밀러"}

Q5: 왜 5개 스크래퍼를 한 매뉴얼로 만들었나요?
────────────────────────────────────────────────────────────────────────────
A: 5개 모두 유사한 구조(BaseScraper 상속, HTML 파싱, 키워드 분류)를
   사용하고, 함께 작동하는 국내외 제약 뉴스 소스이기 때문입니다.
   통합 매뉴얼로 전체적인 워크플로우를 이해하기 쉽습니다.

═══════════════════════════════════════════════════════════════════════════════
15. 연락처 및 지원
═══════════════════════════════════════════════════════════════════════════════

프로젝트: 제약 뉴스 에이전트
스크래퍼: 5개 국내외 제약 뉴스 소스
- GMP Journal (영문 GMP 규제)
- KPBMA (한국제약바이오협회)
- KPA News (약사공론)
- Daily Pharm (데일리팜)
- Yakup (약업신문)

버전: 1.2
작성자: Claude Sonnet 4.5
최종 업데이트: 2026-02-03

버전 히스토리:
- v1.2 (2026-02-03): Daily Pharm v2.0 (3개 카테고리 지원)
- v1.1 (2026-02-03): Yakup v2.0 (3개 카테고리 지원)
- v1.0 (2026-02-02): 초기 버전

관련 문서:
- PDA_1.txt - PDA Letter 스크래퍼
- ISPE_1.txt - ISPE 스크래퍼
- BioProcess_1.txt - BioProcess 스크래퍼
- PharmaceuticalOnline_1.txt - Pharmaceutical Online 스크래퍼

═══════════════════════════════════════════════════════════════════════════════
문서 끝
═══════════════════════════════════════════════════════════════════════════════
